        const cards = [
            {
                id: 1,
                name: "Voltarax",
                faction: "lightning",
                type: "creature",
                rarity: "legendary",
                edition: "1/1",
                attack: 10,
                defense: 8,
                speed: 9,
                price: 10000,
                image: "/images/4.png",
                description: "The ancient guardian of storms, master of thunder and lightning, master of thunder and lightning"
            },
            {
                id: 2,
                name: "Ignothar",
                faction: "fire",
                type: "creature",
                rarity: "legendary",
                edition: "1/1",
                attack: 12,
                defense: 7,
                speed: 6,
                price: 12000,
                image: "https://images.unsplash.com/photo-1525183995014-bd94c0750cd5?w=400&h=250&fit=crop",
                description: "The incandescent titan, embodiment of rage and destruction,master of thunder and lightning"
            },
            {
                id: 3,
                name: "Glacior",
                faction: "ice",
                type: "creature",
                rarity: "legendary",
                edition: "1/1",
                attack: 8,
                defense: 12,
                speed: 7,
                price: 11000,
                image: "https://images.unsplash.com/photo-1483086431886-3590a88317fe?w=400&h=250&fit=crop",
                description: "The eternal paladin, guardian of frozen eternity"
            },
            
            // EPIC CARDS (1/10)
            {
                id: 4,
                name: "Storm Assassin",
                faction: "lightning",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 7,
                defense: 4,
                speed: 10,
                price: 2500,
                image: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=250&fit=crop",
                description: "Silent as shadow, fast as lightning"
            },
            {
                id: 5,
                name: "Lava Colossus",
                faction: "fire",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 9,
                defense: 6,
                speed: 4,
                price: 2800,
                image: "https://images.unsplash.com/photo-1534447677768-be436bb09401?w=400&h=250&fit=crop",
                description: "Walking volcano of pure destruction"
            },
            {
                id: 6,
                name: "Crystalline",
                faction: "ice",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 6,
                defense: 9,
                speed: 5,
                price: 2600,
                image: "https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=250&fit=crop",
                description: "Impenetrable guardian of the frozen realm"
            },
            {
                id: 7,
                name: "Thunder Dragon",
                faction: "lightning",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 8,
                defense: 5,
                speed: 9,
                price: 2700,
                image: "https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?w=400&h=250&fit=crop",
                description: "Soaring through storms with devastating power"
            },
            {
                id: 8,
                name: "Inferno Beast",
                faction: "fire",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 10,
                defense: 5,
                speed: 5,
                price: 2900,
                image: "https://images.unsplash.com/photo-1579546929518-9e396f3cc809?w=400&h=250&fit=crop",
                description: "Unleashed fury from the depths of hell"
            },
            
            // RARE CARDS (1/100)
            {
                id: 9,
                name: "Spark Mage",
                faction: "lightning",
                type: "creature",
                rarity: "rare",
                edition: "1/100",
                attack: 5,
                defense: 3,
                speed: 8,
                price: 800,
                image: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=250&fit=crop",
                description: "Master of electrical manipulation"
            },
            {
                id: 10,
                name: "Flame Warrior",
                faction: "fire",
                type: "creature",
                rarity: "rare",
                edition: "1/100",
                attack: 6,
                defense: 4,
                speed: 5,
                price: 850,
                image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=400&h=250&fit=crop",
                description: "Forged in the heart of volcanoes"
            },
            {
                id: 11,
                name: "Frost Knight",
                faction: "ice",
                type: "creature",
                rarity: "rare",
                edition: "1/100",
                attack: 4,
                defense: 7,
                speed: 6,
                price: 820,
                image: "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=400&h=250&fit=crop",
                description: "Noble protector of the frozen wastes"
            },
            {
                id: 12,
                name: "Lightning Strike",
                faction: "lightning",
                type: "spell",
                rarity: "rare",
                edition: "1/100",
                attack: 0,
                defense: 0,
                speed: 0,
                price: 600,
                image: "https://images.unsplash.com/photo-1475274047050-1d0c0975c63e?w=400&h=250&fit=crop",
                description: "Deal 5 damage to any target"
            },
              {
                id: 13,
                name: "Voltarax",
                faction: "lightning",
                type: "creature",
                rarity: "legendary",
                edition: "1/1",
                attack: 10,
                defense: 8,
                speed: 9,
                price: 10000,
                image: "/images/4.png",
                description: "The ancient guardian of storms, master of thunder and lightning, master of thunder and lightning"
            },
            {
                id: 14,
                name: "Ignothar",
                faction: "fire",
                type: "creature",
                rarity: "legendary",
                edition: "1/1",
                attack: 12,
                defense: 7,
                speed: 6,
                price: 12000,
                image: "https://images.unsplash.com/photo-1525183995014-bd94c0750cd5?w=400&h=250&fit=crop",
                description: "The incandescent titan, embodiment of rage and destruction,master of thunder and lightning"
            },
            {
                id: 15,
                name: "Glacior",
                faction: "ice",
                type: "creature",
                rarity: "legendary",
                edition: "1/1",
                attack: 8,
                defense: 12,
                speed: 7,
                price: 11000,
                image: "https://images.unsplash.com/photo-1483086431886-3590a88317fe?w=400&h=250&fit=crop",
                description: "The eternal paladin, guardian of frozen eternity"
            },
            
            // EPIC CARDS (1/10)
            {
                id: 16,
                name: "Storm Assassin",
                faction: "lightning",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 7,
                defense: 4,
                speed: 10,
                price: 2500,
                image: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=400&h=250&fit=crop",
                description: "Silent as shadow, fast as lightning"
            },
            {
                id: 17,
                name: "Lava Colossus",
                faction: "fire",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 9,
                defense: 6,
                speed: 4,
                price: 2800,
                image: "https://images.unsplash.com/photo-1534447677768-be436bb09401?w=400&h=250&fit=crop",
                description: "Walking volcano of pure destruction"
            },
            {
                id: 18,
                name: "Crystalline",
                faction: "ice",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 6,
                defense: 9,
                speed: 5,
                price: 2600,
                image: "https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=400&h=250&fit=crop",
                description: "Impenetrable guardian of the frozen realm"
            },
            {
                id: 19,
                name: "Thunder Dragon",
                faction: "lightning",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 8,
                defense: 5,
                speed: 9,
                price: 2700,
                image: "https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?w=400&h=250&fit=crop",
                description: "Soaring through storms with devastating power"
            },
            {
                id: 20,
                name: "Inferno Beast",
                faction: "fire",
                type: "creature",
                rarity: "epic",
                edition: "1/10",
                attack: 10,
                defense: 5,
                speed: 5,
                price: 2900,
                image: "https://images.unsplash.com/photo-1579546929518-9e396f3cc809?w=400&h=250&fit=crop",
                description: "Unleashed fury from the depths of hell"
            },
            
            // RARE CARDS (1/100)
            {
                id: 21,
                name: "Spark Mage",
                faction: "lightning",
                type: "creature",
                rarity: "rare",
                edition: "1/100",
                attack: 5,
                defense: 3,
                speed: 8,
                price: 800,
                image: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=400&h=250&fit=crop",
                description: "Master of electrical manipulation"
            },
            {
                id: 22,
                name: "Flame Warrior",
                faction: "fire",
                type: "creature",
                rarity: "rare",
                edition: "1/100",
                attack: 6,
                defense: 4,
                speed: 5,
                price: 850,
                image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=400&h=250&fit=crop",
                description: "Forged in the heart of volcanoes"
            },
            {
                id: 23,
                name: "Frost Knight",
                faction: "ice",
                type: "creature",
                rarity: "rare",
                edition: "1/100",
                attack: 4,
                defense: 7,
                speed: 6,
                price: 820,
                image: "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=400&h=250&fit=crop",
                description: "Noble protector of the frozen wastes"
            },
            {
                id: 24,
                name: "Lightning Strike",
                faction: "lightning",
                type: "spell",
                rarity: "rare",
                edition: "1/100",
                attack: 0,
                defense: 0,
                speed: 0,
                price: 600,
                image: "https://images.unsplash.com/photo-1475274047050-1d0c0975c63e?w=400&h=250&fit=crop",
                description: "Deal 5 damage to any target"
            }
        ];
        let cart = JSON.parse(localStorage.getItem('cart'));
        if(cart === null) cart = []
        let current = 'all'
        let filter_cards = cards
        let cuurent_index


        const cartslider = document.getElementById('cartslider');
        const totalContainer = document.getElementById('totalContainer')
        const panier = document.getElementById('panier')
        const btn_cart = document.getElementById('cart')
        const container = document.getElementById("cardcontainer")
        
if(window.location.pathname == "/market.html"){
function add_cart(show_cards=cards, index=0){     
            container.innerHTML = '';
            for(let i=index ; i<index+9 && i<show_cards.length; i++){
            const card_container = document.createElement('div');
                    card_container.innerHTML=''
                const card_elemnt = document.createElement('div');
                card_elemnt.className =`market-card card-${show_cards[i].faction}`;
                card_elemnt.innerHTML = `
                <div class="card-image" style="background-image: url('${show_cards[i].image}');">
                    <div class="rarity ${show_cards[i].rarity}">${show_cards[i].edition}</div>
                </div>
                <div class="px-4 py-2 bg-[#0E0E22]">
                    <h3 class="text-2xl font-bold mb-2 text-${show_cards[i].faction === "lightning" ? "purple" : show_cards[i].faction ==="fire" ? "orange" : "ciel"}">${show_cards[i].name}</h3>
                    <p class="text-xs text-gray-500 mb-2">${show_cards[i].rarity}</p>
                    <p class="text-xs text-gray-300 mb-6">${show_cards[i].description}</p>
                    <div class="flex justify-between text-gray-400">
                        <div>
                        <span >${show_cards[i].price} üíé</span>
                        </div>
                        <div>
                        <span>‚öîÔ∏è ${show_cards[i].attack}</span>
                        <span>üõ°Ô∏è ${show_cards[i].defense}</span>
                        <span>‚ö° ${show_cards[i].speed}</span>
                        </div> 
                    </div>
                </div>
                `
                const card_button = document.createElement('div')
                card_button.className = 'flex justify-between items-center'
                card_button.innerHTML = `
                    <button class="btn-add-cart mt-4 ml-4" onclick="update_cart(${show_cards[i].id})">Add To Cart</button>
                    <button class="btn-add-favorite mt-4 mr-4" onclick="favorite_card(${show_cards[i].id})">‚ù§Ô∏è</button>

                ` 

                card_container.appendChild(card_elemnt);
                card_container.appendChild(card_button)
                container.appendChild(card_container)
                // container.innerHTML = card_elemnt 
            }
        }
        add_cart(cards, 0)
}
        let index;
       
      function filter_faction(x){
            // if(x === 'all'){
            //         filter_cards = cards
            // }else{
            //     filter_cards = cards.filter(function(card){
            //         return card.faction === x
            //     })
            // }

            filter_cards = x === 'all' ? cards : cards.filter(card => card.faction === x)
            cuurent_index = 0

            add_cart(filter_cards, cuurent_index)
        }


        function filter_rarity(x){
            // if(x === 'all'){
            //     filter_cards = filter_cards.filter(card => card.rarity === current)
            // }
            filter_cards = x === 'all' ? cards : cards.filter(card => card.rarity === x)
            cuurent_index= 0
            add_cart(filter_cards, 0)
        }

        let cpt = 1
        function update_cart(id){
            panier.innerHTML=''
            let total =0;
            for(let i=0; i<cart.length;i++){

            }
            const card = cards.find(c => c.id === id)
            console.log(card);
            const exist = cart.some(x => x.id ===id)
            
            if(!exist){
                cart.push({
                id: card.id,
                name: card.name,
                faction: card.faction,
                type: card.type,
                rarity: card.rarity,
                edition: card.edition,
                attack: card.attack,
                defense: card.defense,
                speed: card.speed,
                price: card.price,
                image: card.image,
                description: card.description,
                quatity: 1
                });
                // console.log(cart)
                localStorage.setItem('cart', JSON.stringify(cart))
                // console.log(cart)
                alert('Added To Cart')
                btn_cart.innerHTML = `Cart (${cpt})`
                cpt++
                panieradder();

            }else{
                alert("Already Added !!")
            }
            
            
            // // let panier = document.getElementById('cart')
            // // // console.log(panier)
            // // panier.innerHTML = `Cart (${cart.length})`
        }


function panieradder() {
    panier.innerHTML = '';
    let total = 0;

    for (let i = 0; i < cart.length; i++) {
        // S√©curit√© : si la quantit√© n‚Äôexiste pas encore, on la cr√©e
        if (!cart[i].quantity) cart[i].quantity = 1;

        let total_card = cart[i].price * cart[i].quantity;
        total += total_card;

        panier.innerHTML += `
            <div class="flex flex-col bg-[#0E0E22] rounded-lg mb-4 p-3">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <img src="${cart[i].image}" alt="${cart[i].name}" class="w-30 h-24 rounded-md object-cover border border-gray-700">
                        <div>
                            <h3 class="font-bold text-sm">${cart[i].name}</h3>
                            <p class="text-gray-400 text-xs">${total_card.toFixed(2)} üíé</p>
                        </div>
                    </div>
                    <button class="text-gray-400 hover:text-red-500 transition" onclick="removeFromCart(${i})">
                        <span>X</span>
                    </button>
                </div>

                <div class="flex justify-center items-center gap-4 mt-3">
                    <button class="text-xl font-bold text-white hover:text-cyan-400 transition" onclick="changeQuantity(${i}, -1)">‚àí</button>
                    <span class="text-lg font-semibold">${cart[i].quantity}</span>
                    <button class="text-xl font-bold text-white hover:text-cyan-400 transition" onclick="changeQuantity(${i}, 1)">+</button>
                </div>
            </div>
        `;
    }

    document.getElementById('totalPrice').textContent = `${total.toFixed(2)} üíé`;
}
const checkoutBtn = document.getElementById('checkoutBtn');

checkoutBtn.addEventListener('click', () => {
    if (cart.length === 0) {
        alert("Votre panier est vide !");
        return;
    }

    let deck = JSON.parse(localStorage.getItem('deck')) || [];

    deck.push(...cart);

    localStorage.setItem('deck', JSON.stringify(deck));

    cart = [];
    localStorage.removeItem('cart');

    panieradder();

    alert("Purchase successful! The cards have been added to your deck ‚úÖ");
});

function changeQuantity(index, delta) {
    if (!cart[index]) return;
    if (!cart[index].quantity) cart[index].quantity = 1;

    cart[index].quantity += delta;

    if (cart[index].quantity <= 0) {
        cart.splice(index, 1);
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    
    panieradder();
}
function removeFromCart(index) {
    cart.splice(index, 1);
    localStorage.setItem('cart', JSON.stringify(cart));
    panieradder(); // üëà On r√©affiche le panier apr√®s suppression
    localStorage.removeItem('cart');
}


  panieradder();

        btn_cart.addEventListener('click', ()=>{

        cartslider.classList.toggle('translate-x-full');
        cartslider.classList.toggle('translate-x-0')

    })


let favorite_cards = JSON.parse(localStorage.getItem('favorite_card'))
if (favorite_cards === null) {
    favorite_cards = [];
}
function favorite_card(id){
    const card = cards.find(c => c.id === id);
    console.log(card)
    if(!(favorite_cards.includes(card))){
        favorite_cards.push(card);
        console.log(favorite_cards);
        localStorage.setItem('favorite_card', JSON.stringify(favorite_cards))
    }
    
}


if (window.location.pathname === "/deck.html") {
    const container = document.getElementById('deckcontainer'); // your grid container
    let deck = JSON.parse(localStorage.getItem('deck')) || [];

    function showDeckCards(deckCards = deck) {
        container.innerHTML = ''; // clear container

        deckCards.forEach(card => {
            const cardContainer = document.createElement('div');

            const cardElement = document.createElement('div');
            cardElement.className = `market-card card-${card.faction}`;
            cardElement.innerHTML = `
                <div class="card-image" style="background-image: url('${card.image}');">
                    <div class="rarity ${card.rarity}">${card.edition}</div>
                </div>
                <div class="px-4 py-2 bg-[#0E0E22]">
                    <h3 class="text-2xl font-bold mb-2 text-${card.faction === "lightning" ? "purple" : card.faction === "fire" ? "orange" : "ciel"}">${card.name}</h3>
                    <p class="text-xs text-gray-500 mb-2">${card.rarity}</p>
                    <p class="text-xs text-gray-300 mb-6">${card.description}</p>
                    <div class="flex justify-between text-gray-400">
                        <div>
                            <span>${card.price} üíé</span>
                        </div>
                        <div>
                            <span>‚öîÔ∏è ${card.attack}</span>
                            <span>üõ°Ô∏è ${card.defense}</span>
                            <span>‚ö° ${card.speed}</span>
                        </div>
                    </div>
                </div>
            `;

            cardContainer.appendChild(cardElement);
            container.appendChild(cardContainer);
        });
    }

    // Show all deck cards
    showDeckCards(deck);
}


if (window.location.pathname === "/favorite.html"){
     let favorite_cards = localStorage.getItem('favorite_card');
        console.log(favorite_cards)
        favorite_cards = JSON.parse(favorite_cards)
        console.log(favorite_cards)
       
        
        function display_favorite(arra){
            const container = document.getElementById("cardcontainer_favorite")
    container.innerHTML = '';
            for(let i=0; i<arra.length; i++){
             
            const card_container = document.createElement('div');

                const card_elemnt = document.createElement('div');
                card_elemnt.className =`market-card card-${arra[i].faction}`;
                card_elemnt.innerHTML = `
                <div class="card-image" style="background-image: url('${arra[i].image}');";>
                    <div class="rarity ${arra[i].rarity}">${arra[i].edition}</div>
                </div>
                <div class="px-4 py-2 bg-[#0E0E22]">
                    <h3 class="text-2xl font-bold mb-2 text-${arra[i].faction === "lightning" ? "purple" : arra[i].faction ==="fire" ? "orange" : "ciel"}">${arra[i].name}</h3>
                    <p class="text-xs text-gray-500 mb-2">${arra[i].rarity}</p>
                    <p class="text-xs text-gray-300 mb-6">${arra[i].description}</p>
                    <div class="flex justify-between text-gray-400">
                        <div>
                        <span >${arra[i].price} üíé</span>
                        </div>
                        <div>
                        <span>‚öîÔ∏è ${arra[i].attack}</span>
                        <span>üõ°Ô∏è ${arra[i].defense}</span>
                        <span>‚ö° ${arra[i].speed}</span>
                        </div>
                        
                    </div>

                </div>
                `
                const card_button = document.createElement('div')
                card_button.innerHTML = `<button class="btn-add-favorite mt-4 ml-2" onclick="remove_favorite(${arra[i].id})">üíî</button>`
                card_container.appendChild(card_elemnt);
                card_container.appendChild(card_button)
                container.appendChild(card_container)
                // container.innerHTML = card_elemnt 
            
        }
        }
        display_favorite(favorite_cards)
        function remove_favorite(id){
            favorite_cards = favorite_cards.filter(card => card.id !== id);

            if(favorite_cards.length === 0){
                localStorage.removeItem("favorite_card");
            } else {
                localStorage.setItem("favorite_card", JSON.stringify(favorite_cards));
            }
        
            display_favorite(favorite_cards);
}

        function filter_faction(x){

            let filter_cards = favorite_cards;
            filter_cards = x === 'all' ? favorite_cards : favorite_cards.filter(card => card.faction === x)
            cuurent_index = 0

            display_favorite(filter_cards)
        }
        function filter_rarity(x){
            let filter_cards = favorite_cards;
            filter_cards = x === 'all' ? favorite_cards : favorite_cards.filter(card => card.rarity === x)
            cuurent_index = 0

            display_favorite(filter_cards)
}
}



      



